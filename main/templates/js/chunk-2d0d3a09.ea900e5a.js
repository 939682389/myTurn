(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d3a09"],{"5e25":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.currentTableData,size:"mini",stripe:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"50"}}),i("el-table-column",{attrs:{label:"id",width:"100",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.id)+" ")]}}])}),i("el-table-column",{attrs:{label:"组织者id",width:"100",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user_id)+" ")]}}])}),i("el-table-column",{attrs:{label:"封面",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.APP_API+"user/img?url="+t.row.image},on:{click:function(i){return e.imagePreview(t.row.image)}}})]}}])}),i("el-table-column",{attrs:{label:"名称",width:"120",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{on:{click:function(i){return e.seeDetail(t.row.name,"name",t.row.id)}}},[e._v(e._s(t.row.name))])]}}])}),i("el-table-column",{attrs:{label:"简介",width:"120",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{on:{click:function(i){return e.seeDetail(t.row.introduction,"introduction",t.row.id)}}},[e._v(e._s(t.row.introduction))])]}}])}),i("el-table-column",{attrs:{label:"公告",width:"120",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{on:{click:function(i){return e.seeDetail(t.row.announcement,"announcement",t.row.id)}}},[e._v(e._s(t.row.announcement))])]}}])}),i("el-table-column",{attrs:{label:"加入问题",width:"120",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{on:{click:function(i){return e.seeDetail(t.row.question,"question",t.row.id)}}},[e._v(e._s(t.row.question))])]}}])}),i("el-table-column",{attrs:{label:"成员数量",width:"80",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.number)+" ")]}}])}),i("el-table-column",{attrs:{label:"申请数量",width:"80",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.applicantNum)+" ")]}}])}),i("el-table-column",{attrs:{label:"创建时间",width:"180",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.create_time)+" ")]}}])}),i("el-table-column",{attrs:{label:"操作",width:"200",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:function(i){e.newImageVisible=!0,e.rowId=t.row.id}}},[e._v("新封面")]),i("el-button",{attrs:{type:"danger",size:"small",round:""},on:{click:function(i){return e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),i("el-dialog",{attrs:{visible:e.imageVisible},on:{"update:visible":function(t){e.imageVisible=t}}},[i("el-image",{staticStyle:{height:"60vh"},attrs:{fit:"fit",src:e.imageUrl}})],1),i("el-dialog",{attrs:{visible:e.contentVisible,title:"查看详情"},on:{"update:visible":function(t){e.contentVisible=t},close:function(t){e.modifyVisible=!1}}},[0==e.modifyVisible?i("span",{domProps:{innerHTML:e._s(e.content)}},[e._v(e._s(e.content))]):e._e(),e.modifyVisible?i("el-input",{attrs:{placeholder:"请输入要修改的内容",type:"textarea",autosize:"",clearable:""},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}):e._e(),i("span",{attrs:{slot:"footer"},slot:"footer"},[0==e.modifyVisible?i("el-button",{on:{click:function(t){e.modifyVisible=!0}}},[e._v("修 改")]):e._e(),e.modifyVisible?i("el-button",{on:{click:function(t){e.modifyVisible=!1}}},[e._v("取 消")]):e._e(),e.modifyVisible?i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleModify()}}},[e._v("确 定")]):e._e()],1)],1),i("el-dialog",{attrs:{visible:e.newImageVisible},on:{"update:visible":function(t){e.newImageVisible=t}}},[i("div",{staticStyle:{display:"flex","justify-content":"center"}},[i("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","flex-direction":"column",width:"178px"}},[i("el-upload",{ref:"upload",attrs:{drag:"",action:e.APP_API+"user/img",data:e.data,name:"img","on-success":e.handleSuccess,"on-preview":e.handlePictureCardPreview,"on-exceed":e.handleOnExceed,"auto-upload":!1,accept:".jpg,.jpeg,.png,.JPG,.JPEG,.PNG",limit:1}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v("将图片拖到此处，或"),i("em",[e._v("点击上传")])]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/jpeg/png文件")])]),i("el-button",{staticStyle:{width:"178px","margin-top":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")])],1)])])],1)},o=[],l=(i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("ade3")),a=i("9c5c"),s={props:{tableData:{default:function(){return[]}},loading:{default:!1}},data:function(){return{APP_API:"https://gathering.cooltian.cn/v1/",currentTableData:[],rowId:-1,imageVisible:!1,imageUrl:"",contentVisible:!1,content:"",type:"",modifyVisible:!1,newImageVisible:!1,data:{type:"image"}}},watch:{tableData:{handler:function(e){this.currentTableData=e},immediate:!0}},methods:{submitUpload:function(){var e=this;this.$confirm("确定上传吗").then((function(t){e.$refs.upload.submit()}))},handleSuccess:function(e,t){var i=this;console.log(e.data),Object(a["l"])({id:this.rowId,image:e.data.url}).then((function(e){console.log(e.data),200==e.data.code&&(i.$notify.success("上传成功"),i.$refs.upload.clearFiles(),i.newImageVisible=!1,i.$emit("submit"))})).catch((function(e){i.$notify.error("未知错误，请刷新页面重试"),console.log("err",e)}))},handlePictureCardPreview:function(e){this.imageUrl=URL.createObjectURL(e.raw),this.imageVisible=!0},handleOnExceed:function(){this.$notify.warning("一次只能上传一个文件")},handleSelectionChange:function(e){this.$emit("select",e)},handleDelete:function(e){var t=this;this.$confirm("确定删除吗").then((function(i){Object(a["e"])({id:e}).then((function(e){console.log(e.data),200==e.data.code&&(t.$notify.success("删除成功"),t.$emit("submit"))})).catch((function(e){t.loading=!1,t.$notify.error("未知错误，请刷新页面重试"),console.log("err",e)}))}))},handleModify:function(){var e=this;this.contentVisible=!1,this.modifyVisible=!1,Object(a["l"])(Object(l["a"])({id:this.rowId},this.type,this.content)).then((function(t){console.log(t.data),200==t.data.code&&(e.$notify.success("修改内容成功"),e.$emit("submit"))})).catch((function(t){e.loading=!1,e.$notify.error("未知错误，请刷新页面重试"),console.log("err",t)}))},seeDetail:function(e,t,i){this.contentVisible=!0,this.content=e,this.type=t,this.rowId=i},imagePreview:function(e){this.imageUrl=this.APP_API+"user/img?url="+e,this.imageVisible=!0}}},c=s,r=i("2877"),u=Object(r["a"])(c,n,o,!1,null,null,null);t["default"]=u.exports}}]);